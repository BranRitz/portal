language: python
sudo: required
dist: trusty
cache: pip
python:
    - "2.7"
os:
    - linux
install:
    - npm install
    - pip install -r requirements.txt
jobs:
    include:
        - stage: "linters"
          script: flake8 designsafe
          script: pylint designsafe
          script: pydocstyle designsafe
          script: eslint designsafe/static/scripts
        - stage: "unit tests"
          script:
            - coverage run --branch --source="designsafe" manage.py test --pattern=tests.py
            - codecov
          script: npm run-script test
