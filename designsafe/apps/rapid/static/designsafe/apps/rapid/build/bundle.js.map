{"version":3,"sources":["webpack:///webpack/bootstrap cfd88d518edd43109ad4","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/controllers/index.js","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/directives/index.js","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/services/index.js","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/controllers/rapid-main-ctrl.js","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/directives/event-listing-detailed.js","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/directives/event-listing.js","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/services/rapid-data-service.js","webpack:///./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/index.js"],"names":["mod","angular","module","controller","directive","service","RapidMainCtrl","$scope","$compile","RapidDataService","show_sidebar","filter_options","active_rapid_event","attribution","maxZoom","streets","satellite","map","zoomControl","setPosition","events","resp","forEach","template","linker","element","marker","L","d","location","lat","lon","newScope","$new","event","addLayer","rapid_event","on","setView","ev","filtered_events","search","eventListingDetailed","templateUrl","scope","eventListing","$http","$q","opts","console","log","title","event_date","event_type","location_description","main_image_url","datasets","doi","href","display","tmp","_","f1","item","f2","requires","push","config","$stateProvider","$uibTooltipProvider","$locationProvider","html5Mode","enabled","url","resolve","auth"],"mappings":"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","file":"./designsafe/apps/rapid/static/designsafe/apps/rapid/build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cfd88d518edd43109ad4","import RapidMainCtrl from './rapid-main-ctrl';\n\n\nlet mod = angular.module('ds.rapid.controllers', []);\n\nmod.controller('RapidMainCtrl', RapidMainCtrl);\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/controllers/index.js","import eventListing from './event-listing';\nimport eventListingDetailed from './event-listing-detailed';\n\nlet mod = angular.module('ds.rapid.directives', []);\n\nmod.directive('eventListing', eventListing);\nmod.directive('eventListingDetailed', eventListingDetailed);\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/directives/index.js","import RapidDataService from './rapid-data-service';\n\n\nlet mod = angular.module('ds.rapid.services', []);\n\nmod.service('RapidDataService', RapidDataService);\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/services/index.js","export default class RapidMainCtrl {\n  constructor ($scope, $compile, RapidDataService) {\n    'ngInject';\n    this.$scope = $scope;\n    this.$compile = $compile;\n    this.RapidDataService = RapidDataService;\n    this.show_sidebar = true;\n    this.filter_options = {};\n    this.active_rapid_event = null;\n\n    let streets = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n    });\n\n    let satellite = L.tileLayer(\n      'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {\n      attribution: '&copy;',\n      maxZoom: 18,\n    });\n\n    let basemaps = {\n      'Street': streets,\n      'Satellite': satellite\n    };\n    this.map = L.map('map', {layers: [streets, satellite]}).setView([0, 0], 2);\n    this.map.zoomControl.setPosition('topright');\n\n    this.event_types = this.RapidDataService.get_event_types();\n\n    this.RapidDataService.get_events().then( (resp)=>{\n      this.events = resp;\n      this.events.forEach((d)=> {\n        let template = \"<div class=''>\" +\n          \"<h3> {{event.title}} </h3>\" +\n          \"<div ng-repeat='dataset in event.datasets'>\" +\n          \"<a href='{{dataset.href}}'> {{dataset.doi}} </a>\"+\n          \"</div>\";\n        let linker = this.$compile(angular.element(template));\n        let marker = L.marker([d.location.lat, d.location.lon]);\n        let newScope = this.$scope.$new();\n        newScope.event = d;\n        // marker.bindPopup(linker(newScope)[0], {className : 'rapid-popup'});\n        this.map.addLayer(marker);\n        marker.rapid_event = d;\n        marker.on('click', (ev) => {\n          if (marker.rapid_event == this.active_rapid_event) {\n            this.active_rapid_event = null;\n          } else {\n            this.active_rapid_event = marker.rapid_event;\n          }\n          this.$scope.$apply();\n        });\n      });\n    });\n  }\n\n  select_event (ev) {\n    this.map.setView([ev.location.lat, ev.location.lon],8, {animate: true});\n    this.active_rapid_event = ev;\n  }\n\n  search () {\n    this.filtered_events = this.RapidDataService.search(this.events, this.filter_options);\n  }\n\n  clear_filters () {\n    this.filter_options = {};\n    this.search();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/controllers/rapid-main-ctrl.js","\nexport default function eventListingDetailed() {\n  return {\n    templateUrl: \"/static/designsafe/apps/rapid/html/event-listing-detailed.html\",\n    scope: {\n      event: '=event',\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/directives/event-listing-detailed.js","\nexport default function eventListing() {\n  return {\n    templateUrl: \"/static/designsafe/apps/rapid/html/event-listing.html\",\n    scope: {\n      event: '=event',\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/directives/event-listing.js","export default class RapidDataService {\n  constructor ($http, $q) {\n    'ngInject';\n    this.$http = $http;\n    this.$q = $q;\n  }\n\n  get_events (opts) {\n    console.log(opts);\n    // return this.$http.get('/rapid/events', opts).then( (resp) => {\n    //   console.log(resp);\n    // });\n    let events = [\n      {\n        title: 'Tejas Flood',\n        event_date: new Date(2016, 1, 1),\n        event_type: 'flood',\n        location_description: 'Central Texas',\n        main_image_url: '/static/designsafe/apps/rapid/images/example_event.jpeg',\n        location: {\n          lat: 30.0,\n          lon: -100.0,\n        },\n        datasets: [\n          {\n            doi: 'doi:123dfsf345',\n            href: 'www.designsafe-ci.org/data/browser',\n            title: 'Lidar of stuff'\n          },\n          {\n            doi: 'doi:123dfsf345',\n            href: 'www.designsafe-ci.org/data/browser',\n            title: 'Imagery of things'\n          },\n          {\n            doi: 'doi:123dfsf345',\n            href: 'www.designsafe-ci.org/data/browser',\n            title: 'Dog pictures and other words for a long title'\n          }\n        ]\n      },\n      {\n        title: 'New Zealand Earthquake',\n        event_date: new Date(2015, 1, 1),\n        event_type: 'earthquake',\n        location_description: 'Central New Zealand',\n        location: {\n          lat: -38.0,\n          lon: 177.0,\n        }\n      },\n      {\n        title: 'Japan Tsunami',\n        event_date: new Date(2015, 1, 1),\n        event_type: 'tsunami',\n        location_description: 'Fukushima Japan',\n        location: {\n          lat: 37.75,\n          lon: 140.4676,\n        }\n      },\n      {\n        title: 'Oso Landslide',\n        event_date: new Date(2015, 1, 1),\n        event_type: 'landslide',\n        location_description: 'Oso Washington',\n        location: {\n          lat: 48.27,\n          lon: -121.92,\n        }\n      },\n      {\n        title: 'Hurricane Katrina',\n        event_date: new Date(2015, 1, 1),\n        event_type: 'hurricane',\n        location_description: 'US Gulf Coast',\n        location: {\n          lat: 29.27,\n          lon: -90.92,\n        }\n      },\n    ];\n\n    return this.$q( (res, rej) => {\n      return res(events);\n    });\n  }\n\n  get_event_types () {\n    return [\n      {\n        event_type: 'earthquake',\n        display: 'Earthquake'\n      },\n      {\n        event_type: 'tsunami',\n        display: 'Tsunami'\n      },\n      {\n        event_type: 'flood',\n        display: 'Flood'\n      },\n      {\n        event_type: 'hurricane',\n        display: 'Hurricane'\n      },\n    ];\n  }\n\n  search (events, filter_options) {\n    let tmp = _.filter(events, (item)=>{\n      let f1 = true;\n      if (filter_options.event_type) {\n        f1 = item.event_type == filter_options.event_type.event_type;\n      }\n      let f2 = true;\n      if (filter_options.search_text) {\n        f2 = item.title.substring(0, filter_options.search_text.length).toLowerCase() === filter_options.search_text.toLowerCase();\n      }\n      return f1 && f2;\n    });\n    return tmp;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/services/rapid-data-service.js","import {mod as rapid_controllers} from './controllers';\nimport {mod as rapid_services} from './services';\nimport {mod as rapid_directives} from './directives';\n\nlet mod = angular.module('designsafe');\nmod.requires.push('ui.router','ds.rapid.controllers', 'ds.rapid.services', 'ds.rapid.directives');\n\nfunction config($stateProvider, $uibTooltipProvider, $urlRouterProvider, $locationProvider) {\n  'ngInject';\n\n  $locationProvider.html5Mode({\n    enabled: true\n  });\n\n  $stateProvider.state('rapid', {\n    url: '/',\n    templateUrl: '/static/designsafe/apps/rapid/html/index.html',\n    controller: 'RapidMainCtrl as vm',\n    resolve: {\n      auth: function () {\n        return true;\n      }\n    }\n  });\n  //config popups etc\n  $uibTooltipProvider.options({popupDelay:1000});\n\n}\n\nmod.config(config);\n\n\n\nexport default mod;\n\n\n\n// WEBPACK FOOTER //\n// ./designsafe/apps/rapid/static/designsafe/apps/rapid/scripts/index.js"],"sourceRoot":""}